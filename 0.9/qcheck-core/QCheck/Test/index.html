<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Test (qcheck-core.QCheck.Test)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">qcheck-core</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">QCheck.Test</span></h1></header><div class="spec type" id="type-cell"><a href="#type-cell" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a cell</code><code></code><code></code></div><div class="doc"><p>A single property test</p></div></div><div class="spec val" id="val-fail_report"><a href="#val-fail_report" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fail_report : string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>Fail the test with some additional message that will
be reported.</p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.7</li></ul></div></div><div class="spec val" id="val-fail_reportf"><a href="#val-fail_reportf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fail_reportf : (<span class="type-var">'a</span>, Format.formatter, unit, <span class="type-var">'b</span>) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>Format version of <a href="index.html#val-fail_report">fail_report</a></p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.7</li></ul></div></div><div class="spec val" id="val-make_cell"><a href="#val-make_cell" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make_cell : ?&#8288;count:int <span class="keyword">&#8209;&gt;</span> ?&#8288;long_factor:int <span class="keyword">&#8209;&gt;</span> ?&#8288;max_gen:int <span class="keyword">&#8209;&gt;</span> ?&#8288;max_fail:int <span class="keyword">&#8209;&gt;</span> ?&#8288;small:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> int) <span class="keyword">&#8209;&gt;</span> ?&#8288;name:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a></code></div><div class="doc"><p><code class="code">make_cell arb prop</code> builds a test that checks property <code class="code">prop</code> on instances
of the generator <code class="code">arb</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">name</span>: the name of the test.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">count</span>: number of test cases to run, counting only
the test cases which satisfy preconditions.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">long_factor</span>: the factor by which to multiply count, max_gen and
max_fail when running a long test (default: 1).</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">max_gen</span>: maximum number of times the generation function
is called in total to replace inputs that do not satisfy
preconditions (should be &gt;= count).</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">max_fail</span>: maximum number of failures before we stop generating
inputs. This is useful if shrinking takes too much time.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">small</span>: kept for compatibility reasons; if provided, replaces
the field <code class="code">arbitrary.small</code>.
If there is no shrinking function but there is a <code class="code">small</code>
function, only the smallest failures will be printed.</li></ul></div></div><div class="spec val" id="val-get_arbitrary"><a href="#val-get_arbitrary" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_arbitrary : <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a></code></div><div class="doc"></div></div><div class="spec val" id="val-get_law"><a href="#val-get_law" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_law : <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-get_name"><a href="#val-get_name" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_name : <span class="type-var">_</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-set_name"><a href="#val-set_name" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_name : <span class="type-var">_</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-get_count"><a href="#val-get_count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_count : <span class="type-var">_</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Get the count of a cell.</p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.5.3</li></ul></div></div><div class="spec val" id="val-get_long_factor"><a href="#val-get_long_factor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_long_factor : <span class="type-var">_</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Get the long factor of a cell.</p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.5.3</li></ul></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-t.Test" class="anchored"><td class="def constructor"><a href="#type-t.Test" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Test</span><span class="keyword"> : </span><span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></td><td class="doc"><p>(** Same as <code class="code">'a cell</code>, but masking the type parameter. This allows to
put tests on different types in the same list of tests. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-make"><a href="#val-make" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make : ?&#8288;count:int <span class="keyword">&#8209;&gt;</span> ?&#8288;long_factor:int <span class="keyword">&#8209;&gt;</span> ?&#8288;max_gen:int <span class="keyword">&#8209;&gt;</span> ?&#8288;max_fail:int <span class="keyword">&#8209;&gt;</span> ?&#8288;small:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> int) <span class="keyword">&#8209;&gt;</span> ?&#8288;name:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">make arb prop</code> builds a test that checks property <code class="code">prop</code> on instances
of the generator <code class="code">arb</code>.
See <a href="index.html#val-make_cell">make_cell</a> for a description of the parameters.</p></div></div><div class="h7">Running the test</div><div class="spec exception" id="exception-Test_fail"><a href="#exception-Test_fail" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Test_fail</span><span class="keyword"> of </span>string<span class="keyword"> * </span>string list</code></div><div class="doc"><p>Exception raised when a test failed, with the list of counter-examples.
<code class="code">Test_fail (name, l)</code> means test <code class="code">name</code> failed on elements of <code class="code">l</code>.</p></div></div><div class="spec exception" id="exception-Test_error"><a href="#exception-Test_error" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Test_error</span><span class="keyword"> of </span>string<span class="keyword"> * </span>string<span class="keyword"> * </span>exn<span class="keyword"> * </span>string</code></div><div class="doc"><p>Exception raised when a test raised an exception <code class="code">e</code>, with
the sample that triggered the exception.
<code class="code">Test_error (name, i, e, st)</code>
means <code class="code">name</code> failed on <code class="code">i</code> with exception <code class="code">e</code>, and <code class="code">st</code> is the
stacktrace (if enabled) or an empty string.</p></div></div><div class="spec val" id="val-print_instance"><a href="#val-print_instance" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_instance : <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-print_c_ex"><a href="#val-print_c_ex" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_c_ex : <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-print_fail"><a href="#val-print_fail" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_fail : <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a> list <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-print_error"><a href="#val-print_error" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_error : ?&#8288;st:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-arbitrary">arbitrary</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <a href="../TestResult/index.html#type-counter_ex">TestResult.counter_ex</a><span class="keyword"> * </span>exn) <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-print_test_fail"><a href="#val-print_test_fail" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_test_fail : string <span class="keyword">&#8209;&gt;</span> string list <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-print_test_error"><a href="#val-print_test_error" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_test_error : string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> exn <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-print_collect"><a href="#val-print_collect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_collect : (string, int) Hashtbl.t <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Print &quot;collect&quot; results.</p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.6</li></ul></div></div><div class="spec val" id="val-print_stat"><a href="#val-print_stat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_stat : (<span class="type-var">'a</span> <a href="../index.html#type-stat">stat</a><span class="keyword"> * </span>(int, int) Hashtbl.t) <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Print statistics.</p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.6</li></ul></div></div><div class="spec val" id="val-check_result"><a href="#val-check_result" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>check_result : <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../TestResult/index.html#type-t">TestResult.t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">check_result cell res</code> checks that <code class="code">res</code> is <code class="code">Ok _</code>, and returns unit.
Otherwise, it raises some exception.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Test_error</span>: if <code class="code">res = Error _</code></li><li><span class="at-tag raise">Raises</span> <span class="module-path">Test_error</span>: if <code class="code">res = Failed _</code></li></ul></div></div><div class="spec type" id="type-res"><a href="#type-res" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>res</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-res.Success" class="anchored"><td class="def constructor"><a href="#type-res.Success" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Success</span></code></td></tr><tr id="type-res.Failure" class="anchored"><td class="def constructor"><a href="#type-res.Failure" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Failure</span></code></td></tr><tr id="type-res.FalseAssumption" class="anchored"><td class="def constructor"><a href="#type-res.FalseAssumption" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">FalseAssumption</span></code></td></tr><tr id="type-res.Error" class="anchored"><td class="def constructor"><a href="#type-res.Error" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Error</span><span class="keyword"> of </span>exn<span class="keyword"> * </span>string</code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-event"><a href="#type-event" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a event</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-event.Generating" class="anchored"><td class="def constructor"><a href="#type-event.Generating" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Generating</span></code></td></tr><tr id="type-event.Collecting" class="anchored"><td class="def constructor"><a href="#type-event.Collecting" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Collecting</span><span class="keyword"> of </span><span class="type-var">'a</span></code></td></tr><tr id="type-event.Testing" class="anchored"><td class="def constructor"><a href="#type-event.Testing" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Testing</span><span class="keyword"> of </span><span class="type-var">'a</span></code></td></tr><tr id="type-event.Shrunk" class="anchored"><td class="def constructor"><a href="#type-event.Shrunk" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Shrunk</span><span class="keyword"> of </span>int<span class="keyword"> * </span><span class="type-var">'a</span></code></td></tr><tr id="type-event.Shrinking" class="anchored"><td class="def constructor"><a href="#type-event.Shrinking" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Shrinking</span><span class="keyword"> of </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span><span class="type-var">'a</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-handler"><a href="#type-handler" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a handler</code><code><span class="keyword"> = </span>string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-event">event</a> <span class="keyword">&#8209;&gt;</span> unit</code><code></code></div><div class="doc"><p>Handler executed after each event during testing of an instance.</p></div></div><div class="spec type" id="type-step"><a href="#type-step" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a step</code><code><span class="keyword"> = </span>string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-res">res</a> <span class="keyword">&#8209;&gt;</span> unit</code><code></code></div><div class="doc"><p>Callback executed after each instance of a test has been run.
The callback is given the instance tested, and the current results
of the test.</p></div></div><div class="spec type" id="type-callback"><a href="#type-callback" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a callback</code><code><span class="keyword"> = </span>string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../TestResult/index.html#type-t">TestResult.t</a> <span class="keyword">&#8209;&gt;</span> unit</code><code></code></div><div class="doc"><p>Callback executed after each test has been run.
<code class="code">f name cell res</code> means test <code class="code">cell</code>, named <code class="code">name</code>, gave <code class="code">res</code>.</p></div></div><div class="spec val" id="val-check_cell"><a href="#val-check_cell" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>check_cell : ?&#8288;long:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;call:<span class="type-var">'a</span> <a href="index.html#type-callback">callback</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;step:<span class="type-var">'a</span> <a href="index.html#type-step">step</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;handler:<span class="type-var">'a</span> <a href="index.html#type-handler">handler</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;rand:Random.State.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../TestResult/index.html#type-t">TestResult.t</a></code></div><div class="doc"><p><code class="code">check_cell ~long ~rand test</code> generates up to <code class="code">count</code> random
values of type <code class="code">'a</code> using <code class="code">arbitrary</code> and the random state <code class="code">st</code>. The
predicate <code class="code">law</code> is called on them and if it returns <code class="code">false</code> or raises an
exception then we have a counter-example for the <code class="code">law</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">long</span>: if <code class="code">true</code> then multiply the number of instances to generate
by the cell's long_factor.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">call</span>: function called on each test case, with the result.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">step</span>: function called on each instance of the test case, with the result.</li><li><span class="at-tag return">Returns</span> the result of the test.</li></ul></div></div><div class="spec val" id="val-check_cell_exn"><a href="#val-check_cell_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>check_cell_exn : ?&#8288;long:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;call:<span class="type-var">'a</span> <a href="index.html#type-callback">callback</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;step:<span class="type-var">'a</span> <a href="index.html#type-step">step</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;rand:Random.State.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-cell">cell</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Same as <a href="index.html#val-check_cell">check_cell</a> but calls <a href="index.html#val-check_result">check_result</a> on the result.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Test_error</span>: if <code class="code">res = Error _</code></li><li><span class="at-tag raise">Raises</span> <span class="module-path">Test_error</span>: if <code class="code">res = Failed _</code></li></ul></div></div><div class="spec val" id="val-check_exn"><a href="#val-check_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>check_exn : ?&#8288;long:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;rand:Random.State.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Checks the property against some test cases, and calls <a href="index.html#val-check_result">check_result</a>,
which might raise an exception in case of failure.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Test_error</span>: if <code class="code">res = Error _</code></li><li><span class="at-tag raise">Raises</span> <span class="module-path">Test_error</span>: if <code class="code">res = Failed _</code></li></ul></div></div></body></html>